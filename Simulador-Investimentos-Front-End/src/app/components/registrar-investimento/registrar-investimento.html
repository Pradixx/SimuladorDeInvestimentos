<div class="registrar-container">
  <h2>Registrar Novo Investimento</h2>

  @if (mensagem) {
    <div [class]="tipoMensagem === 'sucesso' ? 'mensagem-sucesso' : 'mensagem-erro'">
      {{ mensagem }}
    </div>
  }

  <form [formGroup]="formInvestimento" (ngSubmit)="registrar()">
    <div class="form-group">
      <label for="tipo">Tipo de Investimento</label>
      <select id="tipo" formControlName="tipo" (change)="onTipoChange()">
        @for (tipo of tiposInvestimento; track tipo) {
          <option [value]="tipo">{{ tipo }}</option>
        }
      </select>
    </div>

    <!-- Nome -->
    <div class="form-group">
      <label for="nome">Nome do Investimento</label>
      <input id="nome" type="text" formControlName="nome" placeholder="Ex: Meu CDB" />
    </div>

    <!-- Valor inicial -->
    <div class="form-group">
      <label for="valorInicial">Valor Inicial (R$)</label>
      <input id="valorInicial" type="number" formControlName="valorInicial" placeholder="Ex: 1000.00" />
    </div>

    <!-- Campos específicos para CDB -->
    @if (formInvestimento.get('tipo')?.value === 'CDB') {
      <div class="form-group">
        <label for="taxaJuros">Taxa de Juros (% ao ano)</label>
        <input id="taxaJuros" type="number" formControlName="taxaJuros" placeholder="Ex: 10.5" />
      </div>

      <div class="form-group">
        <label for="cdiPercentual">CDI Percentual (%)</label>
        <input id="cdiPercentual" type="number" formControlName="cdiPercentual" placeholder="Ex: 90" />
      </div>
    }

    <!-- Campos específicos para Poupança -->
    @if (formInvestimento.get('tipo')?.value === 'Poupanca') {
      <div class="form-group">
        <label for="selicAnual">Selic Anual (% ao ano)</label>
        <input id="selicAnual" type="number" formControlName="selicAnual" placeholder="Ex: 10.75" />
      </div>
    }

    <!-- Campos específicos para Tesouro Direto -->
    @if (formInvestimento.get('tipo')?.value === 'TesouroDireto') {
      <div class="form-group">
        <label for="taxaPrefixada">Taxa Prefixada (% ao ano)</label>
        <input id="taxaPrefixada" type="number" formControlName="taxaPrefixada" placeholder="Ex: 12" />
      </div>

      <div class="form-group">
        <label for="ipca">IPCA (% ao ano)</label>
        <input id="ipca" type="number" formControlName="ipca" placeholder="Ex: 4.5" />
      </div>
    }

    <!-- Campo comum: Período -->
    <div class="form-group">
      <label for="periodo">Período (meses)</label>
      <input id="periodo" type="number" formControlName="periodo" placeholder="Ex: 12" />
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="formInvestimento.invalid" class="btn-registrar">Registrar</button>
      <button type="button" (click)="limpar()" class="btn-limpar">Limpar</button>
    </div>
  </form>
</div>
