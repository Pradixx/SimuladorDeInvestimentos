<div class="listar-container">
    <h2>Todos os Investimentos</h2>

    @if (mensagem) {
        <div [class]="tipoMensagem === 'sucesso' ? 'mensagem-sucesso' : 'mensagem-erro'">
            {{ mensagem }}
        </div>
    }

    @if (carregando) {
        <div class="loading">Carregando investimentos...</div>
    } @else if (erroAoCarregar) {
        <div class="mensagem-erro">
            Erro ao carregar investimentos. Tente novamente.
            <button (click)="carregarInvestimentos()" class="btn-recarregar">Recarregar</button>
        </div>
    } @else if (investimentos.length === 0) {
        <div class="nenhum-registro card">
            <h3>Nenhum investimento registrado ainda.</h3>
            <p>Vá para a aba "Registrar Investimento" para criar um novo investimento.</p>
        </div>
    } @else {
        <div class="tabela-responsiva">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Tipo</th>
                        <th>Valor Inicial (R$)</th>
                        <th>Taxa Juros (%)</th>
                        <th>Período (meses)</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    @for (inv of investimentos; track inv.id) {
                        <tr>
                            <td class="id-cell">
                                <span class="id-text">{{ inv.id | slice:0:8 }}...</span>
                                <button (click)="copiarId(inv.id)" class="btn-copiar">Copiar ID</button>
                            </td>
                            <td>{{ inv.nome }}</td>
                            <td>{{ inv.tipo }}</td>
                            <td>{{ inv.valorInicial | number:'1.2-2' }}</td>
                            <td>{{ inv.taxaJuros | number:'1.2-2' }}</td>
                            <td>{{ inv.periodo }}</td>
                            <td>
                                <button (click)="deletarInvestimento(inv.id)" class="btn-deletar">Deletar</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>
